<Window x:Class="EliteInfoPanel.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:local="clr-namespace:EliteInfoPanel"
        xmlns:controls="clr-namespace:EliteInfoPanel.Controls"
        xmlns:converters="clr-namespace:EliteInfoPanel.Converters"
        Background="{DynamicResource MaterialDesignPaper}"
        WindowStyle="None"
        ResizeMode="NoResize"
        WindowStartupLocation="Manual"
        Title="Elite Info Panel" Height="480" Width="1920">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
    </Window.Resources>

    <Grid x:Name="RootGrid">
        <!-- Hyperspace Jump Overlay -->
        <Grid Background="#DD000020"
              Visibility="{Binding IsHyperspaceJumping, Converter={StaticResource BoolToVis}}"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch"
              Panel.ZIndex="9998">
            <StackPanel HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Orientation="Vertical"
                        Margin="20">
                <TextBlock Text="{Binding HyperspaceDestination, StringFormat='Jumping to {0}...'}"
                           Foreground="#80FFFFFF"
                           FontSize="48"
                           FontWeight="Light"
                           TextAlignment="Center"
                           Margin="0,0,0,20"/>
                <TextBlock Text="{Binding HyperspaceStarClass, StringFormat='Star Class: {0}'}"
                           Foreground="#40FFFFFF"
                           FontSize="28"
                           FontWeight="Light"
                           TextAlignment="Center"
                           Visibility="{Binding HyperspaceStarClass, Converter={StaticResource BoolToVis}}"
                           Margin="0,0,0,40"/>
                <ProgressBar Width="400"
                             Height="8"
                             IsIndeterminate="True"
                             Foreground="#60FFFFFF"
                             Background="Transparent"/>
            </StackPanel>
        </Grid>

        <!-- Loading Overlay -->
        <Grid Background="#DD000020"
              Visibility="{Binding IsLoading, Converter={StaticResource BoolToVis}}"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch"
              Panel.ZIndex="9997">
            <StackPanel HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Orientation="Vertical"
                        Margin="20">
                <TextBlock Text="Waiting for Elite to Load..."
                           Foreground="#80FFFFFF"
                           FontSize="64"
                           FontWeight="SemiBold"
                           TextAlignment="Center"
                           Margin="0,0,0,20"/>
                <ProgressBar Width="160"
                             Height="16"
                             IsIndeterminate="True"
                             Foreground="DeepSkyBlue"
                             Background="Transparent"/>
            </StackPanel>
        </Grid>

        <!-- Main Content Grid -->
        <Grid x:Name="MainGrid" 
              HorizontalAlignment="Stretch" 
              Background="{DynamicResource MaterialDesignPaper}"
              VerticalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Summary Card -->
            <materialDesign:Card Grid.Column="{Binding SummaryCard.DisplayColumn}"
                                 Grid.ColumnSpan="{Binding SummaryCard.ColumnSpan}"
                                 Margin="5" Padding="5"
                                 Visibility="{Binding SummaryCard.IsVisible, Converter={StaticResource BoolToVis}}">
                <controls:SummaryCard DataContext="{Binding SummaryCard}" />
            </materialDesign:Card>

            <!-- Cargo Card -->
            <materialDesign:Card Grid.Column="{Binding CargoCard.DisplayColumn}"
                                 Grid.ColumnSpan="{Binding CargoCard.ColumnSpan}"
                                 Margin="5" Padding="5"
                                 Visibility="{Binding CargoCard.IsVisible, Converter={StaticResource BoolToVis}}">
                <controls:CargoCard DataContext="{Binding CargoCard}" />
            </materialDesign:Card>

            <!-- Backpack Card -->
            <materialDesign:Card Grid.Column="{Binding BackpackCard.DisplayColumn}"
                                 Grid.ColumnSpan="{Binding BackpackCard.ColumnSpan}"
                                 Margin="5" Padding="5"
                                 Visibility="{Binding BackpackCard.IsVisible, Converter={StaticResource BoolToVis}}">
                <controls:BackpackCard DataContext="{Binding BackpackCard}" />
            </materialDesign:Card>

            <!-- Nav Route Card -->
            <materialDesign:Card Grid.Column="{Binding RouteCard.DisplayColumn}"
                                 Grid.ColumnSpan="{Binding RouteCard.ColumnSpan}"
                                 Margin="5" Padding="5"
                                 Visibility="{Binding RouteCard.IsVisible, Converter={StaticResource BoolToVis}}">
                <controls:RouteCard DataContext="{Binding RouteCard}" />
            </materialDesign:Card>

            <!-- Ship Modules Card -->
            <materialDesign:Card Grid.Column="{Binding ModulesCard.DisplayColumn}"
                                 Grid.ColumnSpan="{Binding ModulesCard.ColumnSpan}"
                                 Margin="5" Padding="5"
                                 Visibility="{Binding ModulesCard.IsVisible, Converter={StaticResource BoolToVis}}">
                <controls:ModulesCard DataContext="{Binding ModulesCard}" />
            </materialDesign:Card>

            <!-- Status Flags Card -->
            <materialDesign:Card Grid.Column="{Binding FlagsCard.DisplayColumn}"
                                 Grid.ColumnSpan="{Binding FlagsCard.ColumnSpan}"
                                 Margin="5" Padding="5"
                                 Visibility="{Binding FlagsCard.IsVisible, Converter={StaticResource BoolToVis}}">
                <controls:FlagsCard DataContext="{Binding FlagsCard}" />
            </materialDesign:Card>
        </Grid>

        <!-- Toast Notifications -->
        <materialDesign:Snackbar x:Name="ToastHost"
                                 MessageQueue="{Binding ToastQueue}"
                                 VerticalAlignment="Bottom"
                                 HorizontalAlignment="Center"
                                 Margin="20"
                                 FontSize="20"/>

        <!-- Close Button -->
        <Button Width="40" Height="40"
                Style="{DynamicResource MaterialDesignFlatButton}"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Margin="0,10,10,0"
                Padding="0"
                ToolTip="Close"
                Command="{Binding CloseCommand}"
                Background="Transparent"
                BorderBrush="Transparent">
            <materialDesign:PackIcon Kind="Close"
                                     Width="20" Height="20"
                                     Foreground="{DynamicResource MaterialDesignBody}" />
        </Button>

        <!-- Floating Options Button -->
        <Button Width="56" Height="56"
                Background="Transparent"
                BorderBrush="Transparent"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Margin="16"
                ToolTip="Options"
                Command="{Binding OpenOptionsCommand}">
            <materialDesign:PackIcon Kind="Cog"
                                     Width="24"
                                     Height="24"
                                     Foreground="Orange" />
        </Button>
    </Grid>
</Window>